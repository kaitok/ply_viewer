<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Graphics</title>
    <style>
      body { 
        margin: 0;
        background: #000;
      }
      .head {
        height: 20px;
        color: #fff;
        padding: 20px 0 0 10px;
      }
      #canvas{
        width: 800px;
        height: 600px;
      }
		</style>
    <script src="js/three.js"></script>
    <script src="js/PLYLoader.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script>
    window.addEventListener( "DOMContentLoaded", function(){
      const canvas = document.getElementById('canvas');

      const renderer = new THREE.WebGLRenderer();
      renderer.setSize( canvas.clientWidth, canvas.clientHeight );
      document.body.appendChild( renderer.domElement );


      const scene = new THREE.Scene();
      var fov = 45; // 視野角：0～90
      var aspect = canvas.clientWidth / canvas.clientHeight; // 縦横比
      var near = 1; // 視体積手前までの距離
      var far = 1000; // 視体積奥までの距離

      var camera = new THREE.PerspectiveCamera(fov, aspect, near, far)
      camera.position.set(0, 0, 12);



      var controls = new THREE.OrbitControls( camera, renderer.domElement );
      update();

      const plyLoader = new THREE.PLYLoader();
      const plyMaterial = new THREE.PointsMaterial({
        color: 0x00ff00,
        size: 0.05
      });

      plyLoader.load('./data/sample.ply', (geometry) => {
        group = new THREE.Points(geometry, plyMaterial);
        group.sortParticles = true;
        scene.add(group);
        renderer.render( scene, camera );
      });

      function update() {
        renderer.render(scene, camera);
        requestAnimationFrame(update);
      }
    });
		</script>
  </head>
  <body>

    <div class="head">
      Graphics
    </div>
    <div id="canvas"></div>

  </body>
</html>